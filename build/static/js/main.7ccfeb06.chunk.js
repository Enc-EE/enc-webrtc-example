(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(9),i=a.n(c),r=(a(17),a(1)),o=a(2),l=a(4),h=a(3),u=a(5),m=(a(18),a(6)),d=a.n(m),v=a(7),p=(a(20),a(10)),g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).webRtcConnector=void 0,a.startListen=Object(v.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.webRtcConnector.createListener();case 2:t=e.sent,a.webRtcConnector.startListener(),a.setState({client1Id:t,isStarted:a.webRtcConnector.isStarted});case 5:case"end":return e.stop()}},e)})),a.stopListen=function(){a.webRtcConnector.stopListener(),a.setState({isStarted:a.webRtcConnector.isStarted})},a.join=Object(v.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.client2Id){e.next=7;break}return e.next=3,a.webRtcConnector.connect(a.state.client2Id);case 3:e.sent.addEventListener("datachannel",function(e){console.log("hi there"),a.props.onDataChannel(e.channel)}),e.next=8;break;case 7:console.log("id missing");case 8:case"end":return e.stop()}},e)})),a.createChat=function(e){},a.state={client1Id:"",client2Id:"",isStarted:!1},a.webRtcConnector=new p.WebRtcConnector("https://enc-webrtc-signaling-app.azurewebsites.net"),a.webRtcConnector.receivedNegotiatedConnection.addEventListener(function(e){var t=e.createDataChannel("data");a.props.onDataChannel(t)}),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"howTo"},s.a.createElement("div",{className:"client1Div"},s.a.createElement("div",{className:"client1Buttons"},s.a.createElement("button",{onClick:this.startListen},"Start Listen"),s.a.createElement("button",{onClick:this.stopListen},"Stop Listen")),this.state.isStarted?s.a.createElement("p",null,"Listening: ",this.state.client1Id):s.a.createElement("p",null,"Not Listening.")),s.a.createElement("div",{className:"client2Div"},s.a.createElement("input",{type:"text",size:5,value:this.state.client2Id,onChange:function(t){return e.setState({client2Id:t.target.value})}}),s.a.createElement("button",{onClick:this.join},"Connect")))}}]),t}(s.a.Component),f=(a(21),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).key=0,a.messages=[],a.sendMessage=function(){a.props.chatService.sendMessage(a.state.message),a.setState({message:"",messages:a.messages})},a.receiveMessage=function(e){a.setState({message:"",messages:a.messages})},a.messages=a.props.chatService.messages,a.state={message:"",messages:a.messages},a.props.chatService.received=a.receiveMessage,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props!=e&&(this.messages=this.props.chatService.messages,this.setState({message:"",messages:this.messages}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chat"},s.a.createElement("div",{className:"messages"},this.state.messages.map(function(t){return s.a.createElement("span",{className:"message",key:e.key++},t)})),s.a.createElement("textarea",{value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}}),s.a.createElement("button",{onClick:this.sendMessage},"Send"))}}]),t}(s.a.Component)),b=(a(22),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).key=0,a.onClickChat=function(e){console.log(e),a.setState({activeChat:e})},a.state={chats:a.props.chats,activeChat:void 0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chats"},s.a.createElement("div",{className:"chats-nav"},this.state.chats.map(function(t,a){return s.a.createElement("h2",{className:"chat-nav",key:e.key++,onClick:function(a){return e.onClickChat(t)}},a+1)})),this.state.activeChat?s.a.createElement(f,{chatService:this.state.activeChat}):s.a.createElement("div",null))}}]),t}(s.a.Component)),C=function e(t){var a=this;Object(r.a)(this,e),this.dataChannel=t,this.messages=[],this.received=function(){},this.sendMessage=function(e){a.dataChannel.send(e),a.messages.push("me: "+e)},this.receiveMessage=function(e){a.messages.push("not me: "+e.data),a.received(e)},this.dataChannel.addEventListener("message",this.receiveMessage)},w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).chats=[],a.onDataChannel=function(e){a.chats.push(new C(e)),a.setState({chats:a.chats})},a.state={chats:a.chats},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement("h1",null,"Enc Web RTC"),s.a.createElement(g,{onDataChannel:this.onDataChannel}),s.a.createElement(b,{chats:this.state.chats}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.7ccfeb06.chunk.js.map